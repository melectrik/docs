<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>server &mdash; ViUR Server 1.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/mbtemplate.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ViUR Server 1.1.0 documentation" href="index.html" />
    <link rel="next" title="Cache" href="cache.html" />
    <link rel="prev" title="ViUR Applications" href="applications.html" />
   
  
  <link rel="icon" href="_static/favicon.png" type="image/png"/>
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server">
<h1>server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="server.setup">
<code class="descclassname">server.</code><code class="descname">setup</code><span class="sig-paren">(</span><em>modules</em>, <em>render=None</em>, <em>default='jinja2'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Define whats going to be served by this instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<em>module | object</em>) &#8211; Usually the module provided as <em>modules</em> directory within the application.</li>
<li><strong>renders</strong> (<em>module | dict</em>) &#8211; Usually the module <em>server.renders</em>, or a dictionary renderName =&gt; renderClass.</li>
<li><strong>default</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Name of the renderer, which will form the root of the application.              This will be the renderer, which wont get a prefix, usually jinja2.             (=&gt; /user instead of /jinja2/user)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="lang-support">
<h2>lang support<a class="headerlink" href="#lang-support" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="server.translate">
<code class="descclassname">server.</code><code class="descname">translate</code><span class="sig-paren">(</span><em>key</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate <em>key</em> into language text pendant.</p>
<p>This function is part of ViURs language support facilities for supporting internationalization (i18n).</p>
<p>Translations are provided in the applications <em>translations</em> module in form of a dict, where the keys
should be the language strings in the project&#8217;s major language (usually english), and the values the
strings provided in the particular language implemented. The translation key strings must be given
in a lower-case order, altought they may be capitalized or upper-case written. If no key is found
within a specific translation, it is directly used as the output string.</p>
<p>The strings may contain placeholders in form <code class="docutils literal"><span class="pre">{{placeholer}}</span></code>, which can be assigned via the
<em>kwargs</em> argument.</p>
<p><code class="docutils literal"><span class="pre">translate()</span></code> is also provided as <code class="docutils literal"><span class="pre">_()</span></code> as global function.</p>
<p>In this simple example, a file <code class="docutils literal"><span class="pre">translations/de.py</span></code> is implemented with the content:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">de</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;welcome to viur&quot;</span><span class="p">:</span> <span class="s2">u&quot;Willkommen in ViUR&quot;</span><span class="p">,</span>
                <span class="s2">&quot;hello {{user}}!&quot;</span><span class="p">:</span> <span class="s2">u&quot;Hallo, {{user}}!&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To support internationalization, it is simply done this way:</p>
<p>Language support is also provided in Jinja2-templates like this:</p>
<p>This will both output &#8220;Hello John Doe! - Welcome to ViUR&#8221; in an english-configured language environment,
and &#8220;Hallo John Doe! - Willkommen in ViUR&#8221; in a german-configured language environment.</p>
<p>The current session language (or default language) can be overridden with <code class="docutils literal"><span class="pre">_lang</span></code>, e.g.</p>
<p>will result in &#8220;Hallo John Doe! - Welcome to ViUR&#8221; in a german-configured language environment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The key value that should be translated; If no key is found in the configured language,     key is directly used.</li>
<li><strong>kwargs</strong> &#8211; May contain place-holders replaced as <code class="docutils literal"><span class="pre">{{placeholer}}</span></code> within the key or translation.  The special-value <code class="docutils literal"><span class="pre">_lang</span></code> overrides the current language setting.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Translated text or key, with replaced placeholders, if given.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.setDefaultLanguage">
<code class="descclassname">server.</code><code class="descname">setDefaultLanguage</code><span class="sig-paren">(</span><em>lang</em><span class="sig-paren">)</span><a class="headerlink" href="#server.setDefaultLanguage" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures default language to <em>lang</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>lang</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Name of the language module to use by default.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.setDefaultDomainLanguage">
<code class="descclassname">server.</code><code class="descname">setDefaultDomainLanguage</code><span class="sig-paren">(</span><em>domain</em>, <em>lang</em><span class="sig-paren">)</span><a class="headerlink" href="#server.setDefaultDomainLanguage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="server-securityheaders-set-varius-security-releated-http-headers">
<h2>server.securityheaders - Set varius security releated http-headers<a class="headerlink" href="#server-securityheaders-set-varius-security-releated-http-headers" title="Permalink to this headline">¶</a></h2>
<p>This module allows configuring security related http-headers. The use is highly recommended.</p>
<blockquote>
<div><ul class="simple">
<li>Content Security Policy: This header tells the clients browser, in which way and from which sources resources
like images, css and javascript may be supplied. You should at <em>least</em> deny inline javascript.
See <a class="reference external" href="https://developer.mozilla.org/docs/Web/Security/CSP">https://developer.mozilla.org/docs/Web/Security/CSP</a> for more informations.</li>
<li>Http strict transport security: Force the use of <a class="reference external" href="https://">https://</a> for the current domain even if the user enters an <a class="reference external" href="http://">http://</a>
link in the future. Currently only supported on <a href="#id1"><span class="problematic" id="id2">*</span></a>.appspot.com.
See <a class="reference external" href="https://developer.mozilla.org/docs/Web/Security/HTTP_strict_transport_security">https://developer.mozilla.org/docs/Web/Security/HTTP_strict_transport_security</a> and <a class="reference external" href="https://cloud.google.com/appengine/docs/python/requests#Python_Request_headers">https://cloud.google.com/appengine/docs/python/requests#Python_Request_headers</a> .</li>
<li>Public key pinning: Explicitly white-list specifiy certificates / certificate authorities for this domain. The client
will reject any other (possibly even valid) certificates not matching these criteria. Currently not supported on
the appengine. See <a class="reference external" href="https://code.google.com/p/googleappengine/issues/detail?id=12694">https://code.google.com/p/googleappengine/issues/detail?id=12694</a> and
<a class="reference external" href="https://developer.mozilla.org/docs/Web/Security/Public_Key_Pinning">https://developer.mozilla.org/docs/Web/Security/Public_Key_Pinning</a> .</li>
<li>X-Frame-Options: Prevents loading your site inside an &lt;iframe&gt;. Prevents certain types of click-jacking attacks if
supported by the browser. See <a class="reference external" href="https://developer.mozilla.org/docs/Web/HTTP/X-Frame-Options">https://developer.mozilla.org/docs/Web/HTTP/X-Frame-Options</a> .</li>
<li>X-Xss-Protection: Configure reflected XSS-Protection found in IE and Chrome. Use with care, as certain versions of IE
contain a bug that actually <em>opens</em> an XSS-vulnerability if enabled!
See <a class="reference external" href="https://hackademix.net/2009/11/21/ies-xss-filter-creates-xss-vulnerabilities/">https://hackademix.net/2009/11/21/ies-xss-filter-creates-xss-vulnerabilities/</a> and
<a class="reference external" href="https://blogs.msdn.microsoft.com/ie/2008/07/02/ie8-security-part-iv-the-xss-filter/">https://blogs.msdn.microsoft.com/ie/2008/07/02/ie8-security-part-iv-the-xss-filter/</a> .</li>
<li>X-Content-Type-Options: Disables Mimetype-sniffing performed by IE and Chrome.
See <a class="reference external" href="https://blogs.msdn.microsoft.com/ie/2008/09/02/ie8-security-part-vi-beta-2-update/">https://blogs.msdn.microsoft.com/ie/2008/09/02/ie8-security-part-vi-beta-2-update/</a> .</li>
</ul>
</div></blockquote>
<span class="target" id="module-server.securityheaders"></span><dl class="function">
<dt id="server.securityheaders._rebuildCspHeaderCache">
<code class="descclassname">server.securityheaders.</code><code class="descname">_rebuildCspHeaderCache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders._rebuildCspHeaderCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebuilds the internal conf[&#8220;viur.security.contentSecurityPolicy&#8221;][&#8220;_headerCache&#8221;] dictionary, ie. it constructs
the Content-Security-Policy-Report-Only and Content-Security-Policy headers based on what has been passed
to &#8216;addRule&#8217; earlier on. Should not be called directly.</p>
</dd></dl>

<dl class="function">
<dt id="server.securityheaders.addCspRule">
<code class="descclassname">server.securityheaders.</code><code class="descname">addCspRule</code><span class="sig-paren">(</span><em>objectType</em>, <em>srcOrDirective</em>, <em>enforceMode='monitor'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders.addCspRule" title="Permalink to this definition">¶</a></dt>
<dd><p>This function helps configuring and reporting of content security policy rules and violations.
To enable CSP, call addCspRule() from your projects main file before calling server.setup().</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">security</span><span class="o">.</span><span class="n">addCspRule</span><span class="p">(</span><span class="s2">&quot;default-src&quot;</span><span class="p">,</span><span class="s2">&quot;self&quot;</span><span class="p">,</span><span class="s2">&quot;enforce&quot;</span><span class="p">)</span> <span class="c1">#Enable CSP for all types and made us the only allowed source</span>

<span class="n">security</span><span class="o">.</span><span class="n">addCspRule</span><span class="p">(</span><span class="s2">&quot;style-src&quot;</span><span class="p">,</span><span class="s2">&quot;self&quot;</span><span class="p">,</span><span class="s2">&quot;enforce&quot;</span><span class="p">)</span> <span class="c1"># Start a new set of rules for stylesheets whitelist us</span>
<span class="n">security</span><span class="o">.</span><span class="n">addCspRule</span><span class="p">(</span><span class="s2">&quot;style-src&quot;</span><span class="p">,</span><span class="s2">&quot;unsafe-inline&quot;</span><span class="p">,</span><span class="s2">&quot;enforce&quot;</span><span class="p">)</span> <span class="c1"># This is currently needed for textBones!</span>
</pre></div>
</div>
<p>If you don&#8217;t want these rules to be enforced and just getting a report of violations replace &#8220;enforce&#8221; with
&#8220;monitor&#8221;. To add a report-url use something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">security</span><span class="o">.</span><span class="n">addCspRule</span><span class="p">(</span><span class="s2">&quot;report-uri&quot;</span><span class="p">,</span><span class="s2">&quot;/cspReport&quot;</span><span class="p">,</span><span class="s2">&quot;enforce&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>and register a function at /cspReport to handle the reports.</p>
<p>..note:</p>
<div class="highlight-python"><div class="highlight"><pre>Our tests showed that enabling a report-url on production systems has limited use. There are literally
thousands of browser-extensions out there that inject code into the pages displayed. This causes a whole
flood of violations-spam to your report-url.
</pre></div>
</div>
<p>&#64;param objectType: For which type of objects should this directive be enforced? (script-src, img-src, ...)
&#64;type objectType: string
&#64;param srcOrDirective: Either a domain which should be white-listed or a CSP-Keyword like &#8216;self&#8217;, &#8216;unsafe-inline&#8217;, etc.
&#64;type srcOrDirective: string
&#64;param enforceMode: Should this directive be enforced or just logged?
&#64;type enforceMode: &#8216;monitor&#8217; or &#8216;enforce&#8217;</p>
</dd></dl>

<dl class="function">
<dt id="server.securityheaders.enableStrictTransportSecurity">
<code class="descclassname">server.securityheaders.</code><code class="descname">enableStrictTransportSecurity</code><span class="sig-paren">(</span><em>maxAge=31536000</em>, <em>includeSubDomains=False</em>, <em>preload=False</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders.enableStrictTransportSecurity" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables HTTP strict transport security.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>maxAge</strong> &#8211; The time, in seconds, that the browser should remember that this site is only to be accessed using HTTPS.</li>
<li><strong>includeSubDomains</strong> &#8211; If this parameter is set, this rule applies to all of the site&#8217;s subdomains as well.</li>
<li><strong>preload</strong> &#8211; If set, we&#8217;ll issue a hint that preloading would be appreciated.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.securityheaders.setPublicKeyPins">
<code class="descclassname">server.securityheaders.</code><code class="descname">setPublicKeyPins</code><span class="sig-paren">(</span><em>pins</em>, <em>method='sha256'</em>, <em>maxAge=172800</em>, <em>includeSubDomains=False</em>, <em>reportUri=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders.setPublicKeyPins" title="Permalink to this definition">¶</a></dt>
<dd><p>Set certificate pins. There must be at <em>least</em> two pins.
See <a class="reference external" href="https://developer.mozilla.org/en/docs/Web/Security/Public_Key_Pinning">https://developer.mozilla.org/en/docs/Web/Security/Public_Key_Pinning</a> for more details.
:param pins: List of Pins
:param method: Hash algorithm used. Must be currently sha256.
:param maxAge: The time, in seconds, that the browser should remember that this site is only to be accessed using one of the pinned keys.
:param includeSubDomains: If this optional parameter is specified, this rule applies to all of the site&#8217;s subdomains as well.
:param reportUri: If this optional parameter is specified, pin validation failures are reported to the given URL.
:return: None</p>
</dd></dl>

<dl class="function">
<dt id="server.securityheaders.setXContentTypeNoSniff">
<code class="descclassname">server.securityheaders.</code><code class="descname">setXContentTypeNoSniff</code><span class="sig-paren">(</span><em>enable</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders.setXContentTypeNoSniff" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets X-Content-Type-Options if enable is true, otherwise no header is emited.
:param enable: Enable emitting this header or not
:type enable: bool
:return:</p>
</dd></dl>

<dl class="function">
<dt id="server.securityheaders.setXFrameOptions">
<code class="descclassname">server.securityheaders.</code><code class="descname">setXFrameOptions</code><span class="sig-paren">(</span><em>action</em>, <em>uri=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders.setXFrameOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets X-Frame-Options to prevent click-jacking attacks.
:param action: off | deny | sameorigin | allow-from
:type action: string
:param uri: URL to whitelist
:type uri: string
:return:</p>
</dd></dl>

<dl class="function">
<dt id="server.securityheaders.setXXssProtection">
<code class="descclassname">server.securityheaders.</code><code class="descname">setXXssProtection</code><span class="sig-paren">(</span><em>enable</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securityheaders.setXXssProtection" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets X-XSS-Protection header. If set, mode will always be block.
:param enable: Enable the protection or not. Set to None to drop this header
:type enable: bool | None
:return:</p>
</dd></dl>

</div>
<div class="section" id="server-db-database-access-tools">
<h2>server.db - Database access tools<a class="headerlink" href="#server-db-database-access-tools" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="server.db.Get">
<code class="descclassname">server.db.</code><code class="descname">Get</code><span class="sig-paren">(</span><em>keys</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve one or more entities from the data store.</p>
<p>Retrieves the entity or entities with the given key(s) from the data store
and returns them as fully populated <a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a> objects.</p>
<p>If there is an error, the function raises a subclass of <code class="xref py py-exc docutils literal"><span class="pre">datastore_errors.Error</span></code>.</p>
<p>If keys is a single key or str, an Entity will be returned,
or <code class="xref py py-exc docutils literal"><span class="pre">EntityNotFoundError</span></code> will be raised if no existing entity matches the key.</p>
<p>However, if keys is a list or tuple, a list of entities will be returned
that corresponds to the sequence of keys. It will include entities for keys
that were found and None placeholders for keys that were not found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<em>Key | str | list of Key | list of str</em>) &#8211; Key, str or list of keys or strings to be retrieved.</li>
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Optional configuration to use for this request. This must be specified           as a keyword argument.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Entity or list of Entity objects corresponding to the specified key(s).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a> | list of <a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.db.GetAsync">
<code class="descclassname">server.db.</code><code class="descname">GetAsync</code><span class="sig-paren">(</span><em>keys</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.GetAsync" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously retrieves one or more entities from the data store.</p>
<p>This function is identical to <a class="reference internal" href="#server.db.Get" title="server.db.Get"><code class="xref py py-func docutils literal"><span class="pre">server.db.Get()</span></code></a>, except that it
returns an asynchronous object. Call <code class="docutils literal"><span class="pre">get_result()</span></code> on the return value to
block on the call and get the results.</p>
</dd></dl>

<dl class="function">
<dt id="server.db.GetOrInsert">
<code class="descclassname">server.db.</code><code class="descname">GetOrInsert</code><span class="sig-paren">(</span><em>key</em>, <em>kindName=None</em>, <em>parent=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.GetOrInsert" title="Permalink to this definition">¶</a></dt>
<dd><p>Either creates a new entity with the given key, or returns the existing one.</p>
<p>Its guaranteed that there is no race-condition here; it will never overwrite an
previously created entity. Extra keyword arguments passed to this function will be
used to populate the entity if it has to be created; otherwise they are ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> (<em>server.db.Key | String</em>) &#8211; The key which will be fetched or created.           If key is a string, it will be used as the name for the new entity, therefore the               collectionName is required in this case.</li>
<li><strong>kindName</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The data kind to use for that entity. Ignored if key is a db.Key.</li>
<li><strong>parent</strong> (<em>db.Key or None</em>) &#8211; The parent entity of the entity.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns the wanted Entity.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#server.db.Entity" title="server.db.Entity">server.db.Entity</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.db.Put">
<code class="descclassname">server.db.</code><code class="descname">Put</code><span class="sig-paren">(</span><em>entities</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Put" title="Permalink to this definition">¶</a></dt>
<dd><p>Store one or more entities in the data store.</p>
<p>The entities may be new or previously existing. For new entities,
<code class="docutils literal"><span class="pre">Put()</span></code> will fill in the app id and key assigned by the data store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>entities</strong> (<a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a> | list of <a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a>) &#8211; Entity or list of entities to be stored.</li>
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Optional configuration to use for this request. This must be specified           as a keyword argument.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">If the argument <code class="docutils literal"><span class="pre">entities</span></code> is a single <a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a>,           a single Key is returned. If the argument is a list of <a class="reference internal" href="#server.db.Entity" title="server.db.Entity"><code class="xref py py-class docutils literal"><span class="pre">server.db.Entity</span></code></a>,               a list of Keys will be returned.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">Key | list of keys</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">TransactionFailedError</span></code>, if the action could not be committed.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.db.PutAsync">
<code class="descclassname">server.db.</code><code class="descname">PutAsync</code><span class="sig-paren">(</span><em>entities</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.PutAsync" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously store one or more entities in the data store.</p>
<p>This function is identical to <a class="reference internal" href="#server.db.Put" title="server.db.Put"><code class="xref py py-func docutils literal"><span class="pre">server.db.Put()</span></code></a>, except that it
returns an asynchronous object. Call <code class="docutils literal"><span class="pre">get_result()</span></code> on the return value to
block on the call and get the results.</p>
</dd></dl>

<dl class="function">
<dt id="server.db.Delete">
<code class="descclassname">server.db.</code><code class="descname">Delete</code><span class="sig-paren">(</span><em>keys</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes one or more entities from the data store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Warning:</th><td class="field-body">Permanently deletes entities, use with care!</td>
</tr>
</tbody>
</table>
<p>Deletes the given entity or entities from the data store. You can only delete
entities from your app. If there is an error, the function raises a
subclass of <code class="xref py py-exc docutils literal"><span class="pre">datastore_errors.Error</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<em>Key | str | list of Key | list of str</em>) &#8211; Key, str or list of keys or strings to be deleted.</li>
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Optional configuration to use for this request. This must be specified           as a keyword argument.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">TransactionFailedError</span></code>, if the deletion could not be committed.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.db.DeleteAsync">
<code class="descclassname">server.db.</code><code class="descname">DeleteAsync</code><span class="sig-paren">(</span><em>keys</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.DeleteAsync" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously deletes one or more entities from the data store.</p>
<p>This function is identical to <a class="reference internal" href="#server.db.Delete" title="server.db.Delete"><code class="xref py py-func docutils literal"><span class="pre">server.db.Delete()</span></code></a>, except that it
returns an asynchronous object. Call <code class="docutils literal"><span class="pre">get_result()</span></code> on the return value to
block on the call and get the results.</p>
</dd></dl>

<dl class="attribute">
<dt id="server.db.Entity">
<code class="descclassname">server.db.</code><code class="descname">Entity</code><a class="headerlink" href="#server.db.Entity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="server.db.Query">
<em class="property">class </em><code class="descclassname">server.db.</code><code class="descname">Query</code><span class="sig-paren">(</span><em>kind</em>, <em>srcSkelClass=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Thin wrapper around datastore.Query to provide a consistent
(camelCase) API.</p>
<dl class="attribute">
<dt id="server.db.Query.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#server.db.Query.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.ancestor">
<code class="descname">ancestor</code><span class="sig-paren">(</span><em>ancestor</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.ancestor" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets an ancestor for this query.</p>
<p>This restricts the query to only return result entities that are descended
from a given entity. In other words, all of the results will have the
ancestor as their parent, or parent&#8217;s parent, and so on.</p>
<p>Raises BadArgumentError or BadKeyError if parent is not an existing Entity
or Key in the data store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ancestor</strong> (<em>server.db.Entity | Key</em>) &#8211; Entity or Key. The key must be complete.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the query itself for chaining.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.clone">
<code class="descname">clone</code><span class="sig-paren">(</span><em>keysOnly=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a deep copy of the current query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>keysOnly</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If the query should be used to retrieve entity keys only                       in the new query.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The cloned query.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.count">
<code class="descname">count</code><span class="sig-paren">(</span><em>limit=1000</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of entities that this query matches.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>limit</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Limits the query to the defined maximum entities count.                   If there are more results than this limit, stop short and just return this number.                      Providing this argument makes the count operation more efficient.</li>
<li><strong>config</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Optional configuration to use for this request. This must be specified                   as a keyword argument.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The number of results.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)">int</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.cursor">
<code class="descname">cursor</code><span class="sig-paren">(</span><em>cursor</em>, <em>endCursor=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the start cursor for this query.</p>
<p>The result set will only include results behind that cursor.
The cursor is generated by an earlier query with exactly the same configuration.</p>
<p>Its safe to use client-supplied cursors, a cursor can&#8217;t be abused to access entities
which don&#8217;t match the current filters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cursor</strong> (<em>str | datastore_query.Cursor</em>) &#8211; The cursor key to set to the Query.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the query itself for chaining.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.fetch">
<code class="descname">fetch</code><span class="sig-paren">(</span><em>limit=-1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Run this query and fetch results as <a class="reference internal" href="skeletons.html#server.skeleton.SkelList" title="server.skeleton.SkelList"><code class="xref py py-class docutils literal"><span class="pre">server.skeleton.SkelList</span></code></a>.</p>
<p>This function is similar to <a class="reference internal" href="#server.db.Query.run" title="server.db.Query.run"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.run()</span></code></a>, but returns a
<a class="reference internal" href="skeletons.html#server.skeleton.SkelList" title="server.skeleton.SkelList"><code class="xref py py-class docutils literal"><span class="pre">server.skeleton.SkelList</span></code></a> instance instead of Entities.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Warning:</th><td class="field-body">The query must be limited!</td>
</tr>
</tbody>
</table>
<p>If queried data is wanted as instances of Entity, <a class="reference internal" href="#server.db.Query.run" title="server.db.Query.run"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.run()</span></code></a>
should be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>limit</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Limits the query to the defined maximum entities.                         A maxiumum value of 99 entries can be fetched at once.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">BadFilterError</span></code> if a filter string is invalid</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">BadValueError</span></code> if a filter value is invalid.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">BadQueryError</span></code> if an IN filter in combination with a sort order on                       another property is provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>filter</em>, <em>value=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a filter to this query. #fixme: Better description required here...</p>
<p>The following examples are equivalent: <code class="docutils literal"><span class="pre">filter(</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;John&quot;</span> <span class="pre">)</span></code>
and <code class="docutils literal"><span class="pre">filter(</span> <span class="pre">{&quot;name&quot;:</span> <span class="pre">&quot;John&quot;}</span> <span class="pre">)</span></code>.</p>
<p>See also <a class="reference internal" href="#server.db.Query.mergeExternalFilter" title="server.db.Query.mergeExternalFilter"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.mergeExternalFilter()</span></code></a> for a safer filter implementation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filter</strong> (<em>dict | str</em>) &#8211; A dictionary to read the filters from, or a string (name of that filter)</li>
<li><strong>value</strong> &#8211; The value of that filter. Only valid, if <em>key</em> is a string.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Type:</th><td class="field-body"><p class="first">value: int | long | float | bytes | string | list | datetime</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns the query itself for chaining.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.get">
<code class="descname">get</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns only the first entity of the current query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">dict on success, or None if the result-set is empty.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getAncestor">
<code class="descname">getAncestor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getAncestor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the ancestor of this query (if any).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str | None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getCursor">
<code class="descname">getCursor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getCursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a valid cursor from the last run of this query.</p>
<p>The source of this cursor varies depending on what the last call was:
- <a class="reference internal" href="#server.db.Query.run" title="server.db.Query.run"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.run()</span></code></a>: A cursor that points immediatelly behind the                     last result pulled off the returned iterator.
- <a class="reference internal" href="#server.db.Query.get" title="server.db.Query.get"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.get()</span></code></a>:: A cursor that points immediatelly behind the                    last result in the returned list.
- <a class="reference internal" href="#server.db.Query.count" title="server.db.Query.count"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.count()</span></code></a>: A cursor that points immediatelly behind the                   last result counted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A cursor that can be used in subsequent query requests.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">datastore_query.Cursor</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">AssertionError</span></code> if the query has not yet been run or cannot be compiled.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getFilter">
<code class="descname">getFilter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the filters applied to the current query as dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Filter as dictionary.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getKind">
<code class="descname">getKind</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getKind" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the kind of this query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getOrder">
<code class="descname">getOrder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a datastore_query.Order for the current instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The sort orders set on the current query, or None.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">datastore_query.Order or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getOrders">
<code class="descname">getOrders</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getOrders" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of orders applied to this query.</p>
<p>Every element in the list returned (if any), is a tuple of (property,direction).</p>
<p>Property is the name of the property used to sort, direction a bool
(false =&gt; ascending, True =&gt; descending).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">List of orderings, in tuples (property,direction).</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="renders.html#server.render.pdf.default.Render.list" title="server.render.pdf.default.Render.list">list</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getQuery">
<code class="descname">getQuery</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a datastore_query.Query for the current instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">datastore_query.Query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getQueryOptions">
<code class="descname">getQueryOptions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getQueryOptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a datastore_query.QueryOptions for the current instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">datastore_query.QueryOptions</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.getSkel">
<code class="descname">getSkel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.getSkel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a matching <code class="xref py py-class docutils literal"><span class="pre">server.db.skeleton.Skeleton</span></code> instance for the
current query.</p>
<p>Its only possible to use this function if this query has been created using
<a class="reference internal" href="skeletons.html#server.skeleton.Skeleton.all" title="server.skeleton.Skeleton.all"><code class="xref py py-func docutils literal"><span class="pre">server.skeleton.Skeleton.all()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The Skeleton or None if the result-set is empty.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="skeletons.html#server.skeleton.Skeleton" title="server.skeleton.Skeleton"><code class="xref py py-class docutils literal"><span class="pre">server.skeleton.Skeleton</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.isKeysOnly">
<code class="descname">isKeysOnly</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.isKeysOnly" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this query is configured as <em>keys only</em>, False otherwise.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.iter">
<code class="descname">iter</code><span class="sig-paren">(</span><em>keysOnly=False</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.iter" title="Permalink to this definition">¶</a></dt>
<dd><p>Run this query and return an iterator for the results.</p>
<p>The advantage of this function is, that it allows for iterating
over a large result-set, as it hasn&#8217;t have to be pulled in advance
from the data store.</p>
<p>The disadvantage is, that is supports no caching yet.</p>
<p>This function intentionally ignores a limit set by <a class="reference internal" href="#server.db.Query.limit" title="server.db.Query.limit"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.limit()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Warning:</th><td class="field-body">If iterating over a large result set, make sure the query supports cursors.                   Otherwise, it might not return all results as the AppEngine doesn&#8217;t maintain the view                   for a query for more than ~30 seconds.</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><strong>keysOnly</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If the query should be used to retrieve entity keys only.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.limit">
<code class="descname">limit</code><span class="sig-paren">(</span><em>amount</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the query limit to <em>amount</em> entities in the result.</p>
<p>Specifying an amount of 0 disables the limit (use with care!).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>amount</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; The maximum number of entities.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the query itself for chaining.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.mergeExternalFilter">
<code class="descname">mergeExternalFilter</code><span class="sig-paren">(</span><em>filters</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.mergeExternalFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>Safely merges filters according to the data model.</p>
<p>Its only valid to call this function if the query has been created using
<a class="reference internal" href="skeletons.html#server.skeleton.Skeleton.all" title="server.skeleton.Skeleton.all"><code class="xref py py-func docutils literal"><span class="pre">server.skeleton.Skeleton.all()</span></code></a>.</p>
<p>Its safe to pass filters received from an external source (a user);
unknown/invalid filters will be ignored, so the query-object is kept in a
valid state even when processing malformed data.</p>
<p>If complex queries are needed (e.g. filter by relations), this function
shall also be used.</p>
<p>See also <a class="reference internal" href="#server.db.Query.filter" title="server.db.Query.filter"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.filter()</span></code></a> for simple filters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filters</strong> (<a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; A dictionary of attributes and filter pairs.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Returns the query itself for chaining.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.order">
<code class="descname">order</code><span class="sig-paren">(</span><em>*orderings</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.order" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a query sorting.</p>
<p>Resulting entities will be sorted by the first property argument, then by the
second, and so on.</p>
<p>The following example</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span> <span class="s2">&quot;Person&quot;</span> <span class="p">)</span>
<span class="n">query</span><span class="o">.</span><span class="n">order</span><span class="p">(</span> <span class="s2">&quot;bday&quot;</span><span class="p">,</span> <span class="p">(</span> <span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="n">Query</span><span class="o">.</span><span class="n">DESCENDING</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>sorts every Person in order of their birthday, starting with January 1.
People with the same birthday are sorted by age, oldest to youngest.</p>
<p>The direction for each sort property may be provided; if omitted, it
defaults to ascending.</p>
<p><code class="docutils literal"><span class="pre">order()</span></code> may be called multiple times. Each call resets the sort order
from scratch.</p>
<p>If an inequality filter exists in this Query it must be the first property
passed to <code class="docutils literal"><span class="pre">order()</span></code>. Any number of sort orders may be used after the
inequality filter property. Without inequality filters, any number of
filters with different orders may be specified.</p>
<p>Entities with multiple values for an order property are sorted by their
lowest value.</p>
<p>Note that a sort order implies an existence filter! In other words,
Entities without the sort order property are filtered out, and <em>not</em>
included in the query results.</p>
<p>If the sort order property has different types in different entities -
e.g. if bob[&#8216;id&#8217;] is an int and fred[&#8216;id&#8217;] is a string - the entities will be
grouped first by the property type, then sorted within type. No attempt is
made to compare property values across types.</p>
<p>Raises BadArgumentError if any argument is of the wrong format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>orderings</strong> &#8211; The properties to sort by, in sort order.                     Each argument may be either a string or (string, direction) 2-tuple.</li>
<li><strong>orderings</strong> &#8211; str | tuple</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns the query itself for chaining.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#server.db.Query" title="server.db.Query">server.db.Query</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>limit=-1</em>, <em>keysOnly=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run this query.</p>
<p>It is more efficient to use <em>limit</em> if the number of results is known.</p>
<p>If queried data is wanted as instances of Skeletons, <a class="reference internal" href="#server.db.Query.fetch" title="server.db.Query.fetch"><code class="xref py py-func docutils literal"><span class="pre">server.db.Query.fetch()</span></code></a>
should be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>limit</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Limits the query to the defined maximum entities.</li>
<li><strong>keysOnly</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If the query should be used to retrieve entity keys only.</li>
<li><strong>kwargs</strong> &#8211; Any keyword arguments accepted by datastore_query.QueryOptions().</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">An iterator that provides access to the query results iterator</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference internal" href="renders.html#server.render.pdf.default.Render.list" title="server.render.pdf.default.Render.list">list</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><code class="xref py py-exc docutils literal"><span class="pre">BadFilterError</span></code> if a filter string is invalid</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><code class="xref py py-exc docutils literal"><span class="pre">BadValueError</span></code> if a filter value is invalid.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">BadQueryError</span></code> if an IN filter in combination with a sort order on                       another property is provided</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.setFilterHook">
<code class="descname">setFilterHook</code><span class="sig-paren">(</span><em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.setFilterHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs <em>hook</em> as a callback function for new filters.</p>
<p><em>hook</em> will be called each time a new filter constrain is added to the query.
This allows e. g. the relationalBone to rewrite constrains added after the initial
processing of the query has been done (e. g. by <code class="docutils literal"><span class="pre">listFilter()</span></code> methods).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hook</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) &#8211; The function to register as callback.                      A value of None removes the currently active hook.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The previously registered hook (if any), or None.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.setKind">
<code class="descname">setKind</code><span class="sig-paren">(</span><em>newKind</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.setKind" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the kind of this query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>newKind</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; New query kind.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.db.Query.setOrderHook">
<code class="descname">setOrderHook</code><span class="sig-paren">(</span><em>hook</em><span class="sig-paren">)</span><a class="headerlink" href="#server.db.Query.setOrderHook" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs <em>hook</em> as a callback function for new orderings.</p>
<p><em>hook</em> will be called each time a <code class="xref py py-func docutils literal"><span class="pre">db.Query.order()</span></code> is called on this query.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hook</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) &#8211; The function to register as callback.                      A value of None removes the currently active hook.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The previously registered hook (if any), or None.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="server-errors-map-python-exceptions-to-http-error-codes">
<h2>server.errors - Map Python Exceptions to HTTP Error-Codes<a class="headerlink" href="#server-errors-map-python-exceptions-to-http-error-codes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="server.errors.HTTPException">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">HTTPException</code><span class="sig-paren">(</span><em>status</em>, <em>name</em>, <em>descr</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.HTTPException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base-Class for all Exceptions that should match to an http error-code</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.BadRequest">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">BadRequest</code><span class="sig-paren">(</span><em>descr='The request your browser sent cannot be fulfilled due to bad syntax.'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.BadRequest" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used inside the server</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.Redirect">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">Redirect</code><span class="sig-paren">(</span><em>url</em>, <em>descr='Redirect'</em>, <em>status=303</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.Redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Causes an 303 - See Other (or 302 - Found if requested / 301 - Moved Permanently) redirect</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.Unauthorized">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">Unauthorized</code><span class="sig-paren">(</span><em>descr=&quot;The resource is protected and you don't have the permissions.&quot;</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.Unauthorized" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised whenever a request hits an path protected by canAccess() or a canAdd/canEdit/... -Function inside
an application returns false.</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.PaymentRequired">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">PaymentRequired</code><span class="sig-paren">(</span><em>descr='Payment Required'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.PaymentRequired" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used inside the server. This status-code is reserved for further use and is currently not
supported by clients.</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.Forbidden">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">Forbidden</code><span class="sig-paren">(</span><em>descr=&quot;The resource is protected and you don't have the permissions.&quot;</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.Forbidden" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used inside the server. May be utilized in the future to distinguish between requests from
guests and users, who are logged in but don&#8217;t have the permission.</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.NotFound">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">NotFound</code><span class="sig-paren">(</span><em>descr='The requested resource could not be found.'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.NotFound" title="Permalink to this definition">¶</a></dt>
<dd><p>Usually raised in view() methods from application if the given id is invalid.</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.MethodNotAllowed">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">MethodNotAllowed</code><span class="sig-paren">(</span><em>descr='Method Not Allowed'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.MethodNotAllowed" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if a function is accessed which dosn&#8217;t have the &#64;exposed / &#64;internalExposed decorator or
if the request arrived using get, but the function has the &#64;forcePost flag.</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.NotAcceptable">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">NotAcceptable</code><span class="sig-paren">(</span><em>descr='The request cannot be processed due to missing or invalid parameters.'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.NotAcceptable" title="Permalink to this definition">¶</a></dt>
<dd><p>Signals that the parameters supplied doesn&#8217;t match the function signature</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.RequestTimeout">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">RequestTimeout</code><span class="sig-paren">(</span><em>descr='The request has timed out.'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.RequestTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>This must be used for the task api to indicate it should retry</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.Gone">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">Gone</code><span class="sig-paren">(</span><em>descr='Gone'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.Gone" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used inside the server</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.PreconditionFailed">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">PreconditionFailed</code><span class="sig-paren">(</span><em>descr='Precondition Failed'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.PreconditionFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Mostly caused by a missing/invalid securitykey.</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.RequestTooLarge">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">RequestTooLarge</code><span class="sig-paren">(</span><em>descr='Request Too Large'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.RequestTooLarge" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used inside the server</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.Censored">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">Censored</code><span class="sig-paren">(</span><em>descr='Unavailable For Legal Reasons'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.Censored" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used inside the server</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.InternalServerError">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">InternalServerError</code><span class="sig-paren">(</span><em>descr='Internal Server Error'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.InternalServerError" title="Permalink to this definition">¶</a></dt>
<dd><p>The catch-all error raised by the server if your code raises any python-exception not deriving from
HTTPException</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.NotImplemented">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">NotImplemented</code><span class="sig-paren">(</span><em>descr='Not Implemented'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.NotImplemented" title="Permalink to this definition">¶</a></dt>
<dd><p>Not really implemented at the moment :)</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.BadGateway">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">BadGateway</code><span class="sig-paren">(</span><em>descr='Bad Gateway'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.BadGateway" title="Permalink to this definition">¶</a></dt>
<dd><p>Not used</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.ServiceUnavailable">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">ServiceUnavailable</code><span class="sig-paren">(</span><em>descr='Service Unavailable'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.ServiceUnavailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if the flag &#8220;viur.disabled&#8221; in conf.sharedConf is set</p>
</dd></dl>

<dl class="class">
<dt id="server.errors.ReadFromClientError">
<em class="property">class </em><code class="descclassname">server.errors.</code><code class="descname">ReadFromClientError</code><span class="sig-paren">(</span><em>errors</em>, <em>forceFail=False</em><span class="sig-paren">)</span><a class="headerlink" href="#server.errors.ReadFromClientError" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal use only. Used as a __return-<a href="#id3"><span class="problematic" id="id4">value__</span></a> (its not raised!) to transport information on errors
from fromClient in bones to the surrounding skeleton class</p>
</dd></dl>

</div>
<div class="section" id="server-indexes-efficient-pagination">
<h2>server.indexes - Efficient Pagination<a class="headerlink" href="#server-indexes-efficient-pagination" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="server.indexes.IndexMannager">
<em class="property">class </em><code class="descclassname">server.indexes.</code><code class="descname">IndexMannager</code><span class="sig-paren">(</span><em>pageSize=10</em>, <em>maxPages=100</em><span class="sig-paren">)</span><a class="headerlink" href="#server.indexes.IndexMannager" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows efficient pagination for a small specified set of queries.
This works <em>only</em> if the number of different querys is limited.
Otherwise use the built-in page parameter for small result-sets and few pages.
If you have lots of different querys and large result-sets you can only generate next/previous links on the fly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The refreshAll Method is missing - intentionally. Whenever data changes you have to call
refreshIndex for each affected Index. As long as you can name them, their number is
limited and everything is fine :)</p>
</div>
<dl class="method">
<dt id="server.indexes.IndexMannager.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>pageSize=10</em>, <em>maxPages=100</em><span class="sig-paren">)</span><a class="headerlink" href="#server.indexes.IndexMannager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pageSize</strong> &#8211; How many items per page</li>
<li><strong>maxPages</strong> &#8211; How many pages are build. Items become unreachable if the amount of items
exceed pageSize*maxPages (ie. if a forum-thread has more than pageSize*maxPages Posts, Posts
after that barrier won&#8217;t show up).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.indexes.IndexMannager.cursorForQuery">
<code class="descname">cursorForQuery</code><span class="sig-paren">(</span><em>query</em>, <em>page</em><span class="sig-paren">)</span><a class="headerlink" href="#server.indexes.IndexMannager.cursorForQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the starting-cursor for the given query and page using an index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> (<a class="reference internal" href="#server.db.Query" title="server.db.Query"><em>db.Query</em></a>) &#8211; Query to get the cursor for</li>
<li><strong>page</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Page the user wants to retrieve</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">String-Cursor or None if no cursor is applicable</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.indexes.IndexMannager.getPages">
<code class="descname">getPages</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#server.indexes.IndexMannager.getPages" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all starting-cursors for this query.
The first element is always None as the first page doesn&#8217;t
have any start-cursor</p>
</dd></dl>

<dl class="method">
<dt id="server.indexes.IndexMannager.keyFromQuery">
<code class="descname">keyFromQuery</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#server.indexes.IndexMannager.keyFromQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>Derives a unique Database-Key from a given query.
This Key is stable regardless in which order the filter have been applied</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>query</strong> (<em>DB.Query</em>) &#8211; Query to derive key from</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="server.indexes.IndexMannager.refreshIndex">
<code class="descname">refreshIndex</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#server.indexes.IndexMannager.refreshIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Refreshes the Index for the given query
(Actually it removes it from the db so it gets rebuild on next use)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>query</strong> (<a class="reference internal" href="#server.db.Query" title="server.db.Query"><em>db.Query</em></a>) &#8211; Query for which the index should be refreshed</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="server-request-access-the-browsehandler-instance-for-the-current-request">
<h2>server.request - Access the BrowseHandler-Instance for the current request<a class="headerlink" href="#server-request-access-the-browsehandler-instance-for-the-current-request" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="server.request.RequestWrapper">
<em class="property">class </em><code class="descclassname">server.request.</code><code class="descname">RequestWrapper</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.request.RequestWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Request Wrapper.
Allows applications to access the current request
object (google.appengine.ext.webapp.Request)
without having a direct reference to it.
Use singleton &#8216;current&#8217; instead of this class.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">request</span> <span class="kn">import</span> <span class="n">current</span> <span class="k">as</span> <span class="n">currentRequest</span>
<span class="n">currentRequest</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">headers</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-server.securitykey">
<span id="server-securitykey-one-time-tokens"></span><h2>server.securitykey - One-time Tokens<a class="headerlink" href="#module-server.securitykey" title="Permalink to this headline">¶</a></h2>
<p>This module provides onetime keys. Such a Securitykey can only be used once to authenticate an action like
edit an entry. Unless specified otherwise, keys are bound to a session. This prevents such actions from beeing
executed without explicit user consent so an attacker can&#8217;t send special crafted links (like /user/delete/xxx)
to a authenticated user as these links would lack a valid securityKey.</p>
<p>Its also possible to store data along with a securityKey and specify a lifeTime.</p>
<dl class="function">
<dt id="server.securitykey.create">
<code class="descclassname">server.securitykey.</code><code class="descname">create</code><span class="sig-paren">(</span><em>duration=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securitykey.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new onetime Securitykey for the current session
If duration is not set, this key is valid only for the current session.
Otherwise, the key and its data is serialized and saved inside the datastore
for up to duration-seconds</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>duration</strong> (<em>Int or None</em>) &#8211; Make this key valid for a fixed timeframe (and independend of the current session)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The new onetime key</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.securitykey.startClearSKeys">
<code class="descclassname">server.securitykey.</code><code class="descname">startClearSKeys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.securitykey.startClearSKeys" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes old (expired) skeys</p>
</dd></dl>

<dl class="function">
<dt id="server.securitykey.validate">
<code class="descclassname">server.securitykey.</code><code class="descname">validate</code><span class="sig-paren">(</span><em>key</em>, <em>acceptSessionKey=False</em><span class="sig-paren">)</span><a class="headerlink" href="#server.securitykey.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates a onetime securitykey</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> (<em>String</em>) &#8211; The key to validate</li>
<li><strong>acceptSessionKey</strong> (<em>Bool</em>) &#8211; If True, we also accept the session&#8217;s skey</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">False if the key was not valid for whatever reasons, the data (given during createSecurityKey) as dictionary or True if the dict is empty.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="server-utils">
<h2>server.utils<a class="headerlink" href="#server-utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="server.utils.generateRandomString">
<code class="descclassname">server.utils.</code><code class="descname">generateRandomString</code><span class="sig-paren">(</span><em>length=13</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.generateRandomString" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string containing random characters of given <em>length</em>.
Its safe to use this string in URLs or HTML.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>length</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; The desired length of the generated string.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A string with random characters of the given length.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.utils.sendEMail">
<code class="descclassname">server.utils.</code><code class="descname">sendEMail</code><span class="sig-paren">(</span><em>dests</em>, <em>name</em>, <em>skel</em>, <em>extraFiles=[]</em>, <em>cc=None</em>, <em>bcc=None</em>, <em>replyTo=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.sendEMail" title="Permalink to this definition">¶</a></dt>
<dd><p>General purpose function for sending e-mail.</p>
<p>This function allows for sending e-mails, also with generated content using the Jinja2 template engine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dests</strong> (<em>str | list of str</em>) &#8211; Full-qualified recipient email addresses; These can be assigned as list, for multiple targets.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The name of a template from the appengine/emails directory, or the template string itself.</li>
<li><strong>skel</strong> (<em>server.skeleton.Skeleton | dict | None</em>) &#8211; The data made available to the template. In case of a Skeleton, its parsed the usual way;  Dictionarys are passed unchanged.</li>
<li><strong>extraFiles</strong> (<em>list of fileobjects</em>) &#8211; List of <strong>open</strong> fileobjects to be sent within the mail as attachments</li>
<li><strong>cc</strong> (<em>str | list of str</em>) &#8211; Carbon-copy recipients</li>
<li><strong>bcc</strong> (<em>str | list of str</em>) &#8211; Blind carbon-copy recipients</li>
<li><strong>replyTo</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; A reply-to email address</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.utils.sendEMailToAdmins">
<code class="descclassname">server.utils.</code><code class="descname">sendEMailToAdmins</code><span class="sig-paren">(</span><em>subject</em>, <em>body</em>, <em>sender=None</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.sendEMailToAdmins" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an e-mail to the appengine administration of the current app.
(all users having access to the applications dashboard)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>subject</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Defines the subject of the message.</li>
<li><strong>body</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Defines the message body.</li>
<li><strong>sender</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; (optional) specify a different sender</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.utils.getCurrentUser">
<code class="descclassname">server.utils.</code><code class="descname">getCurrentUser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.getCurrentUser" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve current user, if logged in.</p>
<p>If a user is logged in, this function returns a dict containing user data.</p>
<p>If no user is logged in, the function returns None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict | bool</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A dict containing information about the logged-in user, None if no user is logged in.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.utils.markFileForDeletion">
<code class="descclassname">server.utils.</code><code class="descname">markFileForDeletion</code><span class="sig-paren">(</span><em>dlkey</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.markFileForDeletion" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a marker to the data store that the file specified as <em>dlkey</em> can be deleted.</p>
<p>Once the mark has been set, the data store is checked four times (default: every 4 hours)
if the file is in use somewhere. If it is still in use, the mark goes away, otherwise
the mark and the file are removed from the datastore. These delayed checks are necessary
due to database inconsistency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dlkey</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Unique download-key of the file that shall be marked for deletion.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.utils.escapeString">
<code class="descclassname">server.utils.</code><code class="descname">escapeString</code><span class="sig-paren">(</span><em>val</em>, <em>maxLength=254</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.escapeString" title="Permalink to this definition">¶</a></dt>
<dd><p>Quotes several characters and removes &#8220;\n&#8221; and &#8220;\0&#8221; to prevent XSS injection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>val</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The value to be escaped.</li>
<li><strong>maxLength</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; Cut-off after maxLength characters. A value of 0 means &#8220;unlimited&#8221;.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The quoted string.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="server.utils.safeStringComparison">
<code class="descclassname">server.utils.</code><code class="descname">safeStringComparison</code><span class="sig-paren">(</span><em>s1</em>, <em>s2</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.safeStringComparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a string comparison in constant time.
This should prevent side-channel (timing) attacks
on passwords etc.
:param s1: First string to compare
:type s1: string | unicode
:param s2: Second string to compare
:type s2: string | unicode
:return: True if both strings are equal, False otherwise
:return type: bool</p>
</dd></dl>

<dl class="function">
<dt id="server.utils.normalizeKey">
<code class="descclassname">server.utils.</code><code class="descname">normalizeKey</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#server.utils.normalizeKey" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Normalizes a datastore key (replacing _application with the current one)</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/viur.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">server</a><ul>
<li><a class="reference internal" href="#lang-support">lang support</a></li>
<li><a class="reference internal" href="#server-securityheaders-set-varius-security-releated-http-headers">server.securityheaders - Set varius security releated http-headers</a></li>
<li><a class="reference internal" href="#server-db-database-access-tools">server.db - Database access tools</a></li>
<li><a class="reference internal" href="#server-errors-map-python-exceptions-to-http-error-codes">server.errors - Map Python Exceptions to HTTP Error-Codes</a></li>
<li><a class="reference internal" href="#server-indexes-efficient-pagination">server.indexes - Efficient Pagination</a></li>
<li><a class="reference internal" href="#server-request-access-the-browsehandler-instance-for-the-current-request">server.request - Access the BrowseHandler-Instance for the current request</a></li>
<li><a class="reference internal" href="#module-server.securitykey">server.securitykey - One-time Tokens</a></li>
<li><a class="reference internal" href="#server-utils">server.utils</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="applications.html" title="previous chapter">ViUR Applications</a></li>
      <li>Next: <a href="cache.html" title="next chapter">Cache</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/server_api.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <script>
        
    $(document).ready(function() {
        $('#popuplogin').click(function(e) {
               e.stopPropagation();
        });
    });
    
    
        $(document).ready(function () {
            $('#hamburgericon').click(function () {
                $(".sphinxsidebarwrapper").fadeIn(100);
                $("#fcside").fadeIn(100);
                $("body").css({ overflow: 'hidden' });
            });
        });
    
        $(document).ready(function () {
            $('#fcside').click(function () {
                $("body").css({ overflow: 'inherit' });
                $(".sphinxsidebarwrapper").fadeOut(100);
                $("#fcside").fadeOut(100);
            });
        });
        
            
        var thescroll=0;
        var scrolling =false;

    function scrolleventhandler (e) {

        if( thescroll > $(window).scrollTop()){
            scrolldir=-1;
        }else{
            scrolldir=1;
        }
        thescroll=$(window).scrollTop();
        wh=parseInt($("body").css("height").replace("px", ""))

        if (scrolldir>0) {
            $('.logo').addClass("is-scrolled");
            $('.is2').addClass("is-scrolled2");
            $('.is3').addClass("is-scrolled3");
            $('.is4').addClass("is-scrolled4");
            $('.is5').addClass("is-scrolled5");
            $('.viur').addClass("is-scrolled6");
            $('.sphinxsidebarwrapper').addClass("is-scrolled7");
            
        } else {
            $('.logo').removeClass("is-scrolled");
            $('.is2').removeClass("is-scrolled2");
            $('.is3').removeClass("is-scrolled3");
            $('.is4').removeClass("is-scrolled4");
            $('.is5').removeClass("is-scrolled5");
            $('.viur').removeClass("is-scrolled6");
            $('.sphinxsidebarwrapper').removeClass("is-scrolled7");
            
        }

    }
    
	$(window).scroll(scrolleventhandler);
	$(window).resize(scrolleventhandler);
    </script>
    
    
<header class="is2">
	<div class="binding">

		<div class="logo">
			<a href="#">
				<img class="is7" src="_static/viur.png" title="ViUR - Information System">
			</a>
			<h3 class="is3">Information System</h3>
		</div>

		<div class="topnav  no-mobil">
			<ul class="topnavlist is2">
				<li>
					<a class="viur is2 is4" href="#">
						<h2 class="is5">Download</h2>
						<span class="is3">Win | Mac | Linux</span>
					</a>
				</li>
				<li>
					<a class="community is2 is4" href="#">
						<h2 class="is5">Community</h2>
						<span class="is3">Start | Help | API</span>
					</a>
				</li>
				<li>
					<a class="develop is2 is4" href="#">
						<h2 class="is5">Development</h2>
						<span class="is3">Source Code | GIT</span>
					</a>
				</li>
				<li>
					<a class="docu is2 is4" href="#">
						<h2 class="not-mobile is5">Documentation</h2>
						<h2 class="not-desktop is5">Docs</h2>
						<span class="is3">Start | Help | API</span>
					</a>
				</li>
			</ul>
		</div>

	</div>
</header>
    
    <div id="fcside"></div>
    <div class="footer">
      &copy;2015, Mausbrand Informationssysteme GmbH.
      
      | <a href="/impressum">Impressum</a> |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4a0+</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/server_api.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>